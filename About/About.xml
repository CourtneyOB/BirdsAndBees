<?xml version="1.0" encoding="utf-8"?>
<ModMetaData>
	<name>The Birds &amp; The Bees</name>
	<author>Fluffy</author>
	<url>https://ludeon.com/forums/index.php?topic=15964.0</url>
	<targetVersion>0.14.1249</targetVersion>
	<description>Description
======

Animals (including humanoids) require reproductive organs to mate &amp; and do lovin'. 
+ Adds reproductive organs to fleshy pawns (e.g., animals and colonists).
+ Adds neutering operation (removal of said organs).
+ Since reproductive organs are now a body part, they can be affected by external violence - including, but not limited to;
   - Gunfire
   - Berserking colonists
   - Frostbite
   - Castration (Neutering)
+ In addition, old age will also have an effect on humanoids;
   - Impotence
   - Menopause, hot flashes
+ Reworks mating &amp; lovin' to take account of fertility stat.
   - Failure to do lovin' will depress your pawns.


Technical implementation
====== 
The mod adds reproductive organ bodypartDefs and the reproduction PawnCapacityDef, but does not alter bodyDefs directly. Rather, it injects these parts post-load, meaning that theoretically it should be compatible with any mods that add more animals and races. Similarly, the mod alters thinktrees for any fleshy pawns (normally that'd be animals and colonists), replacing the JobGiver_Mate (animals) and JobGiver_Lovin (colonists) nodes with custom versions. JobGiver_Mate still calls the base version after a fertility check for the male partner, JobGiver_Lovin is completely overridden, colonists will still make lovin if one or both partners are infertile (neutered), but will not do so if one or both partners are completely missing their reproductive organs. 

While this method is more complex than directly altering the defs, it should provide the best out-of-the-box compatibility with other mods.

Furthermore, the mod detours PawnUtility.FertileMateTarget to a custom version that includes a fertility check for the female partner, PawnUtility.Mated to link the likelihood of impregnation to the fertility stat, HediffGiver.TryApply to allow a HediffGiver to only apply to a particular gender, and the FinishAction in the MakeNewToils iterator block of JobDriver_Lovin to add moods for failed lovin'. The FinishAction detour depends on compiler generated names to perform correctly, and will likely break in new builds of RimWorld.

	</description>
</ModMetaData>
